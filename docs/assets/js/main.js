"use strict";const characterList=document.querySelector(".js-characterList"),btn=document.querySelector(".js-btn"),input=document.querySelector(".js_input"),favouritesList=document.querySelector(".js-favList");let allCharacters=[],favouritesCharacters=[];function renderOneCharacter(e){let r="";return r=-1===favouritesCharacters.findIndex(r=>r.char_id===parseInt(e.char_id))?"":"selected",`\n  <li class="js-character characters___Articles ${r}"id="${e.char_id}">\n  <article class="characters___Articles___Item">\n      <img src="${e.img}" alt="" class="characters___Articles___Item--img">\n      <h3 class="characters___Articles___Item--h3">${e.name}</h3>\n      <p class="characters___Articles___Item--p">${e.status}</p>\n  </article>\n  </li>`}function renderCharacters(e){characterList.innerHTML="";for(let r=0;r<e.length;r++)characterList.innerHTML+=renderOneCharacter(e[r]);addCharacterListener()}function addCharacterListener(){const e=document.querySelectorAll(".js-character");for(const r of e)r.addEventListener("click",handleCharacters)}function handleCharacters(e){console.log("has hecho click"),e.currentTarget.classList.toggle("selected"),console.log(e.currentTarget.id);const r=allCharacters.find(r=>r.char_id===parseInt(e.currentTarget.id));console.log(r);const a=favouritesCharacters.findIndex(r=>r.char_id===parseInt(e.currentTarget.id));console.log(a),-1===a?(favouritesCharacters.push(r),localStorage.setItem("characterFav",JSON.stringify(favouritesCharacters))):(favouritesCharacters.splice(a,1),localStorage.setItem("characterFav",JSON.stringify(favouritesCharacters))),renderFavCharacters()}function renderFavCharacters(){let e="";for(const r of favouritesCharacters)e+=renderOneCharacter(r);favouritesList.innerHTML=e}function searchCharacters(e){e.preventDefault(),console.log("hiciste click al boton");const r=input.value.toLowerCase(),a=allCharacters.filter(e=>e.name.toLowerCase().includes(r));console.log(a),renderCharacters(a)}btn.addEventListener("click",searchCharacters),fetch("https://breakingbadapi.com/api/characters").then(e=>e.json()).then(e=>{allCharacters=e,renderCharacters(allCharacters)});const savedLocalFAvs=JSON.parse(localStorage.getItem("characterFav"));null!==savedLocalFAvs&&(favouritesCharacters=savedLocalFAvs,renderFavCharacters());